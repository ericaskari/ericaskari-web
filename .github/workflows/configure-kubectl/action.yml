inputs:
    KUBE_CONFIG:
        description: 'KUBE_CONFIG'
        required: true
        default: 'KUBE_CONFIG'
name: ConfigureKubectl
description: ConfigureKubectl
runs:
    using: 'composite'
    steps:
        - run: curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"
          shell: bash
        - run: curl -LO "https://dl.k8s.io/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl.sha256"
          shell: bash
        - run: echo "$(cat kubectl.sha256)  kubectl" | sha256sum --check
          shell: bash
        - run: sudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl
          shell: bash
        - run: kubectl version --client
          shell: bash
        - run: sudo sh -c 'mkdir -p /.kube && touch /.kube/config'
          shell: bash
        - run: export KUBECONFIG=/.kube/config
          shell: bash
        - run: sudo sh -c 'echo "${{ inputs.KUBE_CONFIG }}" | base64 --decode > /.kube/config'
          shell: bash
