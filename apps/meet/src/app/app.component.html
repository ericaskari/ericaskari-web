<div class="flex flex-col gap-4 p-4">
    <div class="flex justify-center">
        <button class="p-4 m-4" (click)="openWebcam()" [disabled]="!isWebcamClosed">Allow Webcam and Audio access</button>
    </div>
    <div class="grid grid-cols-12 gap-2">
        <div class="col-span-6 flex flex-col gap-2">
            <h3 class="col-span-12">Local</h3>
            <video
                [srcObject]="roomService.localStream"
                autoplay
                playsinline
                [muted]="'muted'"
                class="flex-1 p-2 border border-white border-solid mirrored-video w-[100%] h-auto"
            ></video>
        </div>
        <div class="col-span-6 flex flex-col gap-2">
            <h3 class="col-span-12">Rmeote</h3>
            <video
                [srcObject]="roomService.remoteStream"
                autoplay
                playsinline
                class="flex-1 p-2 border border-white border-solid w-[100%] h-auto"
            ></video>
        </div>
    </div>
    <div class="flex flex-col gap-2">
        <button (click)="createRoom()" [disabled]="isWebcamClosed">Create Room</button>
    </div>

    <div>Rooms</div>
    <div class="flex flex-col">
        <div *ngFor="let room of rooms$ | async" class="border p-4">
            <div class="flex gap-2">
                <b>{{ room.id }}</b>
                <button (click)="roomService.deleteRoom(room.id).subscribe()">Delete</button>
                <button (click)="joinRoom(room.id)" [disabled]="isWebcamClosed || room.answer">Join</button>
            </div>
            <div>
                {{ room.offer ? 'Has offer' : 'No Offer' }}
            </div>
            <div>
                {{ room.answer ? 'Has answer' : 'No answer' }}
            </div>
            <div>callerCandidates: {{ room.callerCandidates.length }}</div>
            <div>calleeCandidates: {{ room.calleeCandidates.length }}</div>
        </div>
    </div>
    <div class="border border-white">
        <div class="p-2 font-bold">Create Room logs:</div>
        <div class="p-2" *ngFor="let msg of this.createRoomLogs">{{ msg }}</div>
    </div>
    <div class="border border-white">
        <div class="p-2 font-bold">Join Room logs:</div>
        <div class="p-2" *ngFor="let msg of this.joinRoomLogs">{{ msg }}</div>
    </div>
</div>
